<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ’– A Special Question For You ğŸ’–</title>
  <meta name="description" content="Will you be my Valentine? A special interactive question just for you." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Outfit:wght@300;400;600;700&family=Pacifico&display=swap" rel="stylesheet" />

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  <!-- Lottie -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

  <style>
    /* ============================
       CSS CUSTOM PROPERTIES
    ============================ */
    :root {
      --pink-100: #fff0f3;
      --pink-200: #ffc2d1;
      --pink-300: #ffb3c6;
      --pink-400: #ff8fab;
      --pink-500: #ff6b8a;
      --pink-600: #fb6f92;
      --rose: #e63946;
      --deep-rose: #c1121f;
      --blush: #ffccd5;
      --cream: #fff5f7;
      --gold: #ffd700;
      --bg-dark: #1a0a10;
      --bg-gradient: linear-gradient(135deg, #1a0a10 0%, #2d0a1e 30%, #1a0a10 60%, #2d0a1e 100%);
      --glow-pink: 0 0 40px rgba(255, 107, 138, 0.4), 0 0 80px rgba(255, 107, 138, 0.2);
      --glow-gold: 0 0 30px rgba(255, 215, 0, 0.3), 0 0 60px rgba(255, 215, 0, 0.15);
      --font-script: 'Dancing Script', cursive;
      --font-display: 'Pacifico', cursive;
      --font-body: 'Outfit', sans-serif;
    }

    /* ============================
       RESET & BASE
    ============================ */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    body {
      font-family: var(--font-body);
      background: var(--bg-dark);
      color: var(--pink-200);
      min-height: 100vh;
      overflow-x: hidden;
      cursor: default;
    }

    /* ============================
       CUSTOM CURSOR (heart)
    ============================ */
    @media (hover: hover) {
      body {
        cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%23ff6b8a' d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E") 12 12, auto;
      }
    }

    /* ============================
       FLOATING HEARTS BACKGROUND
    ============================ */
    .hearts-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .floating-heart {
      position: absolute;
      font-size: 1.5rem;
      opacity: 0;
      animation: floatUp linear infinite;
      filter: blur(0.5px);
    }

    @keyframes floatUp {
      0% {
        transform: translateY(100vh) rotate(0deg) scale(0.5);
        opacity: 0;
      }
      10% {
        opacity: 0.6;
      }
      90% {
        opacity: 0.4;
      }
      100% {
        transform: translateY(-10vh) rotate(720deg) scale(1.2);
        opacity: 0;
      }
    }

    /* ============================
       SPARKLE PARTICLES
    ============================ */
    .sparkle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: var(--gold);
      border-radius: 50%;
      pointer-events: none;
      z-index: 1;
      animation: sparkleAnim 1.5s ease-in-out infinite;
    }

    @keyframes sparkleAnim {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* ============================
       SCENES
    ============================ */
    .scene {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      padding: 2rem;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.8s ease, visibility 0.8s ease;
    }

    .scene.active {
      opacity: 1;
      visibility: visible;
    }

    /* ============================
       SCENE 1: ENVELOPE INTRO
    ============================ */
    #scene-intro {
      background: var(--bg-gradient);
    }

    .envelope-container {
      position: relative;
      width: 280px;
      height: 200px;
      cursor: pointer;
      perspective: 1000px;
    }

    .envelope {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .envelope-body {
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, var(--pink-400), var(--pink-600));
      border-radius: 12px;
      box-shadow: var(--glow-pink);
      overflow: hidden;
    }

    .envelope-body::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 50%);
    }

    .envelope-flap {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background: linear-gradient(180deg, var(--pink-500), var(--pink-400));
      clip-path: polygon(0 0, 50% 100%, 100% 0);
      transform-origin: top center;
      transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 2;
    }

    .envelope-container:hover .envelope-flap {
      transform: rotateX(180deg);
    }

    .envelope-heart {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      z-index: 1;
      animation: heartPulse 1.2s ease-in-out infinite;
    }

    @keyframes heartPulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); }
      50% { transform: translate(-50%, -50%) scale(1.15); }
    }

    .intro-text {
      margin-top: 2.5rem;
      font-family: var(--font-script);
      font-size: 1.8rem;
      color: var(--pink-200);
      text-align: center;
      animation: fadeInUp 1s ease 0.5s both;
    }

    .intro-subtext {
      margin-top: 0.8rem;
      font-family: var(--font-body);
      font-size: 0.95rem;
      color: var(--pink-400);
      letter-spacing: 2px;
      text-transform: uppercase;
      animation: fadeInUp 1s ease 1s both, pulse 2s ease-in-out infinite 2s;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }

    /* ============================
       SCENE 2: THE QUESTION
    ============================ */
    #scene-question {
      background: var(--bg-gradient);
    }

    .question-wrapper {
      text-align: center;
      max-width: 700px;
    }

    .bear-container {
      width: 200px;
      height: 200px;
      margin: 0 auto 1.5rem;
      position: relative;
    }

    .bear-emoji {
      font-size: 8rem;
      display: block;
      animation: bearBounce 2s ease-in-out infinite;
      filter: drop-shadow(0 10px 30px rgba(255, 107, 138, 0.3));
    }

    @keyframes bearBounce {
      0%, 100% { transform: translateY(0) rotate(-3deg); }
      25% { transform: translateY(-15px) rotate(3deg); }
      50% { transform: translateY(0) rotate(-3deg); }
      75% { transform: translateY(-8px) rotate(2deg); }
    }

    .question-title {
      font-family: var(--font-display);
      font-size: 3.5rem;
      color: var(--pink-300);
      text-shadow: 0 0 40px rgba(255, 179, 198, 0.5);
      margin-bottom: 0.5rem;
      line-height: 1.3;
    }

    .question-subtitle {
      font-family: var(--font-script);
      font-size: 1.5rem;
      color: var(--pink-400);
      margin-bottom: 2.5rem;
      opacity: 0.8;
    }

    .buttons-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
      min-height: 100px;
      position: relative;
    }

    /* YES BUTTON */
    .btn-yes {
      position: relative;
      padding: 1rem 3rem;
      font-family: var(--font-body);
      font-size: 1.3rem;
      font-weight: 700;
      color: white;
      background: linear-gradient(135deg, var(--pink-500), var(--rose));
      border: none;
      border-radius: 60px;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: var(--glow-pink);
      z-index: 5;
      letter-spacing: 1px;
    }

    .btn-yes::before {
      content: '';
      position: absolute;
      inset: -3px;
      border-radius: 63px;
      background: linear-gradient(135deg, var(--pink-400), var(--gold), var(--pink-400));
      z-index: -1;
      animation: borderGlow 3s linear infinite;
    }

    .btn-yes::after {
      content: '';
      position: absolute;
      inset: 2px;
      border-radius: 58px;
      background: linear-gradient(135deg, var(--pink-500), var(--rose));
      z-index: -1;
    }

    @keyframes borderGlow {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    .btn-yes:hover {
      transform: scale(1.15);
      box-shadow: 0 0 60px rgba(255, 107, 138, 0.6), 0 0 120px rgba(255, 107, 138, 0.3);
    }

    .btn-yes .btn-sparkles {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    /* NO BUTTON */
    .btn-no {
      padding: 0.8rem 2rem;
      font-family: var(--font-body);
      font-size: 1rem;
      font-weight: 400;
      color: var(--pink-400);
      background: transparent;
      border: 2px solid rgba(255, 143, 171, 0.3);
      border-radius: 60px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      z-index: 5;
      user-select: none;
    }

    .btn-no:hover {
      border-color: transparent;
      color: transparent;
    }

    /* ============================
       SCENE 3: CELEBRATION
    ============================ */
    #scene-celebrate {
      background: var(--bg-gradient);
    }

    .celebrate-content {
      text-align: center;
      max-width: 600px;
    }

    .celebrate-emoji {
      font-size: 6rem;
      margin-bottom: 1rem;
      animation: celebrateBounce 1s ease-in-out infinite;
    }

    @keyframes celebrateBounce {
      0%, 100% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.1) rotate(-5deg); }
      75% { transform: scale(1.1) rotate(5deg); }
    }

    .celebrate-title {
      font-family: var(--font-display);
      font-size: 3.5rem;
      background: linear-gradient(135deg, var(--pink-300), var(--gold), var(--pink-300));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease-in-out infinite;
      margin-bottom: 1rem;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .celebrate-message {
      font-family: var(--font-script);
      font-size: 1.6rem;
      color: var(--pink-200);
      line-height: 1.8;
      margin-bottom: 2rem;
    }

    .celebrate-hearts {
      display: flex;
      gap: 1rem;
      justify-content: center;
      font-size: 2rem;
    }

    .celebrate-hearts span {
      animation: heartFloat 2s ease-in-out infinite;
    }

    .celebrate-hearts span:nth-child(2) { animation-delay: 0.2s; }
    .celebrate-hearts span:nth-child(3) { animation-delay: 0.4s; }
    .celebrate-hearts span:nth-child(4) { animation-delay: 0.6s; }
    .celebrate-hearts span:nth-child(5) { animation-delay: 0.8s; }

    @keyframes heartFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    .photo-frame {
      width: 250px;
      height: 250px;
      margin: 2rem auto;
      border: 6px solid var(--pink-400);
      border-radius: 50%;
      overflow: hidden;
      box-shadow: var(--glow-pink);
      animation: frameGlow 3s ease-in-out infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(145deg, rgba(255,107,138,0.1), rgba(255,179,198,0.05));
    }

    @keyframes frameGlow {
      0%, 100% { box-shadow: var(--glow-pink); }
      50% { box-shadow: 0 0 60px rgba(255, 107, 138, 0.6), 0 0 120px rgba(255, 215, 0, 0.2); }
    }

    .photo-frame .couple-emoji {
      font-size: 5rem;
    }

    /* ============================
       LOVE LETTER MODAL
    ============================ */
    .love-letter {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 100;
      align-items: center;
      justify-content: center;
      background: rgba(26, 10, 16, 0.9);
      backdrop-filter: blur(10px);
      padding: 2rem;
    }

    .love-letter.active {
      display: flex;
    }

    .letter-card {
      background: linear-gradient(145deg, #2d0a1e, #1a0a10);
      border: 1px solid rgba(255, 143, 171, 0.2);
      border-radius: 20px;
      padding: 3rem;
      max-width: 500px;
      width: 100%;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5), var(--glow-pink);
      position: relative;
      overflow: hidden;
    }

    .letter-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: conic-gradient(from 0deg, transparent, rgba(255, 107, 138, 0.1), transparent, rgba(255, 215, 0, 0.05), transparent);
      animation: rotateBg 8s linear infinite;
    }

    @keyframes rotateBg {
      to { transform: rotate(360deg); }
    }

    .letter-card > * {
      position: relative;
      z-index: 1;
    }

    .letter-title {
      font-family: var(--font-script);
      font-size: 2rem;
      color: var(--pink-300);
      margin-bottom: 1.5rem;
    }

    .letter-body {
      font-family: var(--font-body);
      font-size: 1rem;
      color: var(--pink-200);
      line-height: 1.8;
      margin-bottom: 2rem;
    }

    .letter-close {
      padding: 0.7rem 2rem;
      font-family: var(--font-body);
      font-size: 0.9rem;
      color: white;
      background: linear-gradient(135deg, var(--pink-500), var(--rose));
      border: none;
      border-radius: 60px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .letter-close:hover {
      transform: scale(1.05);
    }

    /* ============================
       MUSIC TOGGLE
    ============================ */
    .music-toggle {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: rgba(255, 107, 138, 0.15);
      border: 1px solid rgba(255, 143, 171, 0.3);
      color: var(--pink-400);
      font-size: 1.3rem;
      cursor: pointer;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .music-toggle:hover {
      background: rgba(255, 107, 138, 0.3);
      transform: scale(1.1);
    }

    .music-toggle.playing {
      animation: musicPulse 1s ease-in-out infinite;
    }

    @keyframes musicPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(255, 107, 138, 0.4); }
      50% { box-shadow: 0 0 0 10px rgba(255, 107, 138, 0); }
    }

    /* ============================
       NO-EXCUSE OVERLAY
    ============================ */
    .no-excuse {
      position: fixed;
      inset: 0;
      z-index: 200;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(26, 10, 16, 0.95);
      backdrop-filter: blur(15px);
      padding: 2rem;
    }

    .no-excuse.active {
      display: flex;
    }

    .no-excuse-content {
      text-align: center;
    }

    .no-excuse-emoji {
      font-size: 5rem;
      margin-bottom: 1rem;
      animation: shake 0.5s ease-in-out;
    }

    .no-excuse-text {
      font-family: var(--font-script);
      font-size: 2rem;
      color: var(--pink-300);
      margin-bottom: 2rem;
    }

    .no-excuse-btn {
      padding: 1rem 3rem;
      font-family: var(--font-body);
      font-size: 1.1rem;
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, var(--pink-500), var(--rose));
      border: none;
      border-radius: 60px;
      cursor: pointer;
      box-shadow: var(--glow-pink);
      transition: all 0.3s ease;
    }

    .no-excuse-btn:hover {
      transform: scale(1.08);
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-15px) rotate(-5deg); }
      40% { transform: translateX(15px) rotate(5deg); }
      60% { transform: translateX(-10px) rotate(-3deg); }
      80% { transform: translateX(10px) rotate(3deg); }
    }

    /* ============================
       TYPEWRITER
    ============================ */
    .typewriter {
      overflow: hidden;
      white-space: nowrap;
      border-right: 3px solid var(--pink-400);
      animation: typewriter 3s steps(30, end), blinkCursor 0.75s step-end infinite;
      display: inline-block;
    }

    @keyframes typewriter {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blinkCursor {
      50% { border-color: transparent; }
    }

    /* ============================
       RESPONSIVE
    ============================ */
    @media (max-width: 768px) {
      .question-title {
        font-size: 2.2rem;
      }

      .celebrate-title {
        font-size: 2.5rem;
      }

      .bear-emoji {
        font-size: 5rem;
      }

      .buttons-container {
        gap: 1.5rem;
      }

      .envelope-container {
        width: 220px;
        height: 160px;
      }

      .intro-text {
        font-size: 1.4rem;
      }

      .letter-card {
        padding: 2rem;
      }
    }

    @media (max-width: 480px) {
      .question-title {
        font-size: 1.8rem;
      }

      .celebrate-title {
        font-size: 2rem;
      }

      .celebrate-message {
        font-size: 1.2rem;
      }

      .btn-yes {
        padding: 0.8rem 2rem;
        font-size: 1.1rem;
      }
    }

    /* ============================
       SWEET POEM SECTION
    ============================ */
    .poem-section {
      margin-top: 2rem;
    }

    .poem-line {
      font-family: var(--font-script);
      font-size: 1.1rem;
      color: var(--pink-300);
      opacity: 0;
      transform: translateY(20px);
      margin: 0.5rem 0;
    }

    /* ============================
      YES GROW ANIMATION
    ============================ */
    .btn-yes.growing {
      animation: yesGrow 0.5s ease forwards;
    }

    @keyframes yesGrow {
      to {
        transform: scale(1.3);
        padding: 1.2rem 4rem;
        font-size: 1.6rem;
      }
    }

    /* ============================
       HEART RAIN (celebration)
    ============================ */
    .heart-rain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 90;
      overflow: hidden;
    }

    .rain-heart {
      position: absolute;
      top: -50px;
      font-size: 1.5rem;
      animation: rainFall linear forwards;
    }

    @keyframes rainFall {
      to {
        transform: translateY(110vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* ============================
       COUNTDOWN
    ============================ */
    .countdown-container {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      z-index: 50;
      text-align: center;
    }

    .countdown-label {
      font-family: var(--font-body);
      font-size: 0.7rem;
      color: var(--pink-400);
      letter-spacing: 2px;
      text-transform: uppercase;
      margin-bottom: 0.3rem;
    }

    .countdown-timer {
      font-family: var(--font-body);
      font-size: 0.9rem;
      color: var(--pink-300);
      font-weight: 600;
    }

    /* ============================
       LOADING SCREEN
    ============================ */
    .loading-screen {
      position: fixed;
      inset: 0;
      z-index: 999;
      background: var(--bg-dark);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.8s ease;
    }

    .loading-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-heart {
      font-size: 4rem;
      animation: loadingPulse 0.8s ease-in-out infinite;
    }

    @keyframes loadingPulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.3); opacity: 0.7; }
    }

    .loading-text {
      margin-top: 1rem;
      font-family: var(--font-script);
      font-size: 1.2rem;
      color: var(--pink-400);
    }

    /* ============================
       RIBBON BANNER
    ============================ */
    .ribbon {
      position: absolute;
      top: 2rem;
      left: 50%;
      transform: translateX(-50%);
      padding: 0.5rem 2rem;
      background: linear-gradient(135deg, var(--pink-500), var(--rose));
      color: white;
      font-family: var(--font-body);
      font-size: 0.75rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      border-radius: 4px;
      box-shadow: 0 4px 15px rgba(255, 107, 138, 0.3);
    }

    .ribbon::before, .ribbon::after {
      content: 'ğŸ’•';
      margin: 0 0.5rem;
    }
  </style>
</head>
<body>

  <!-- LOADING SCREEN -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-heart">ğŸ’–</div>
    <div class="loading-text">Preparing something special...</div>
  </div>

  <!-- FLOATING HEARTS BACKGROUND -->
  <div class="hearts-bg" id="heartsBg"></div>

  <!-- ==================
       SCENE 1: ENVELOPE
  ================== -->
  <div class="scene active" id="scene-intro">
    <div class="ribbon">February 14th</div>
    <div class="envelope-container" id="envelope" onclick="openEnvelope()">
      <div class="envelope">
        <div class="envelope-body"></div>
        <div class="envelope-flap"></div>
        <div class="envelope-heart">ğŸ’Œ</div>
      </div>
    </div>
    <div class="intro-text">You've got a special letter...</div>
    <div class="intro-subtext">âœ¨ Click the envelope to open âœ¨</div>
  </div>

  <!-- ==================
       SCENE 2: THE QUESTION
  ================== -->
  <div class="scene" id="scene-question">
    <div class="question-wrapper">
      <div class="bear-container">
        <span class="bear-emoji">ğŸ§¸</span>
      </div>
      <h1 class="question-title">Will You Be My Valentine?</h1>
      <p class="question-subtitle" id="subtitle">I promise to make you smile every day ğŸ’•</p>
      <div class="buttons-container" id="buttonsContainer">
        <button class="btn-yes" id="btnYes" onclick="sayYes()">
          Yes! ğŸ’–
        </button>
        <button class="btn-no" id="btnNo">
          No ğŸ˜¢
        </button>
      </div>

      <!-- Sweet poem that appears later -->
      <div class="poem-section" id="poemSection">
        <p class="poem-line" id="poem1">Roses are red,</p>
        <p class="poem-line" id="poem2">Violets are blue,</p>
        <p class="poem-line" id="poem3">I wrote this page,</p>
        <p class="poem-line" id="poem4">Just to ask you ğŸ’</p>
      </div>
    </div>
  </div>

  <!-- ==================
       SCENE 3: CELEBRATION
  ================== -->
  <div class="scene" id="scene-celebrate">
    <div class="celebrate-content">
      <div class="celebrate-emoji">ğŸ¥³</div>
      <h1 class="celebrate-title">Yaaay! I Knew It!</h1>
      <div class="photo-frame">
        <span class="couple-emoji">ğŸ’‘</span>
      </div>
      <p class="celebrate-message">
        You just made me the happiest person in the world! ğŸŒ<br>
        This Valentine's Day is going to be magical âœ¨<br>
        I can't wait to spend it with you! ğŸ¥°
      </p>
      <div class="celebrate-hearts">
        <span>ğŸ’–</span>
        <span>ğŸ’•</span>
        <span>ğŸ’—</span>
        <span>ğŸ’•</span>
        <span>ğŸ’–</span>
      </div>
      <button class="letter-close" onclick="showLoveLetter()" style="margin-top: 2rem;">
        Read My Love Letter ğŸ’Œ
      </button>
    </div>
  </div>

  <!-- ==================
       LOVE LETTER MODAL
  ================== -->
  <div class="love-letter" id="loveLetter">
    <div class="letter-card">
      <h2 class="letter-title">My Dearest Valentine ğŸ’</h2>
      <p class="letter-body">
        Every moment I spend with you feels like a beautiful dream 
        I never want to wake up from. Your smile lights up my world 
        brighter than a thousand stars. âœ¨<br><br>
        Thank you for saying yes! This Valentine's Day, 
        I promise to fill your heart with so much love 
        that there's no room for anything else. ğŸ’•<br><br>
        You're not just my Valentine â€” you're my everything. 
        Here's to us, today and always. ğŸ¥‚
      </p>
      <p style="font-family: var(--font-script); color: var(--pink-400); font-size: 1.3rem; margin-bottom: 1.5rem;">
        Forever Yours â¤ï¸
      </p>
      <button class="letter-close" onclick="closeLoveLetter()">Close ğŸ’•</button>
    </div>
  </div>

  <!-- ==================
       NO EXCUSE OVERLAY
  ================== -->
  <div class="no-excuse" id="noExcuse">
    <div class="no-excuse-content">
      <div class="no-excuse-emoji" id="noExcuseEmoji">ğŸ¥º</div>
      <p class="no-excuse-text" id="noExcuseText">Are you really sure?</p>
      <button class="no-excuse-btn" onclick="closeNoExcuse()">
        Okay, let me reconsider... ğŸ’­
      </button>
    </div>
  </div>

  <!-- ==================
       HEART RAIN (for celebration)
  ================== -->
  <div class="heart-rain" id="heartRain"></div>

  <!-- COUNTDOWN -->
  <div class="countdown-container" id="countdown">
    <div class="countdown-label">Valentine's Day</div>
    <div class="countdown-timer" id="countdownTimer"></div>
  </div>

  <!-- ==================
       SCRIPTS
  ================== -->
  <script>
    // ============================
    // STATE
    // ============================
    let noAttempts = 0;
    let yesSize = 1;
    let poemShown = false;
    let currentScene = 'intro';

    const noMessages = [
      { text: "Are you really sure? ğŸ¥º", emoji: "ğŸ¥º" },
      { text: "Please reconsider! ğŸ˜­", emoji: "ğŸ˜­" },
      { text: "My heart can't take this! ğŸ’”", emoji: "ğŸ’”" },
      { text: "I'll be really sad... ğŸ˜¿", emoji: "ğŸ˜¿" },
      { text: "Pretty please? ğŸ™", emoji: "ğŸŒ¹" },
      { text: "What if I give you chocolate? ğŸ«", emoji: "ğŸ«" },
      { text: "I'll write you a song! ğŸµ", emoji: "ğŸµ" },
      { text: "The bear is crying now! ğŸ§¸ğŸ˜¢", emoji: "ğŸ§¸" },
      { text: "FINE! But the button disagrees! ğŸ˜¤", emoji: "ğŸ˜¤" },
      { text: "You literally cannot say no!", emoji: "ğŸ’–" },
    ];

    const subtitleMessages = [
      "I promise to make you smile every day ğŸ’•",
      "Come on, you know you want to... ğŸ˜",
      "The yes button is getting bigger... ğŸ‘€",
      "I'll do the dishes AND cook! ğŸ³",
      "I promise unlimited hugs! ğŸ¤—",
      "Free cuddles for a lifetime? ğŸ¥°",
      "Think of all the chocolates! ğŸ«",
      "I'll watch your favorite show! ğŸ“º",
      "You're running out of reasons to say no! ğŸ’ƒ",
      "See? It was always meant to be YES! ğŸ’",
    ];

    // ============================
    // LOADING
    // ============================
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.add('hidden');
        initFloatingHearts();
        initSparkles();
        updateCountdown();
        setInterval(updateCountdown, 1000);
      }, 2000);
    });

    // ============================
    // FLOATING HEARTS
    // ============================
    function initFloatingHearts() {
      const container = document.getElementById('heartsBg');
      const hearts = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“', 'ğŸ’˜', 'â¤ï¸', 'ğŸ©·', 'ğŸ¤', 'ğŸ’œ', 'ğŸ©µ'];
      
      for (let i = 0; i < 25; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.fontSize = (Math.random() * 1.5 + 0.8) + 'rem';
        heart.style.animationDuration = (Math.random() * 10 + 8) + 's';
        heart.style.animationDelay = (Math.random() * 10) + 's';
        container.appendChild(heart);
      }
    }

    // ============================
    // SPARKLES
    // ============================
    function initSparkles() {
      for (let i = 0; i < 20; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.left = Math.random() * 100 + '%';
        sparkle.style.top = Math.random() * 100 + '%';
        sparkle.style.animationDelay = (Math.random() * 3) + 's';
        sparkle.style.animationDuration = (Math.random() * 2 + 1) + 's';
        document.body.appendChild(sparkle);
      }
    }

    // ============================
    // COUNTDOWN TO VALENTINE'S DAY
    // ============================
    function updateCountdown() {
      const now = new Date();
      const valentines = new Date(now.getFullYear(), 1, 14); // Feb 14
      if (now > valentines) valentines.setFullYear(valentines.getFullYear() + 1);
      
      const diff = valentines - now;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((diff % (1000 * 60)) / 1000);

      const timer = document.getElementById('countdownTimer');
      if (days === 0 && hours === 0 && mins === 0 && secs === 0) {
        timer.textContent = "ğŸ’– It's Today! ğŸ’–";
      } else if (days === 0) {
        timer.textContent = `${hours}h ${mins}m ${secs}s`;
      } else {
        timer.textContent = `${days}d ${hours}h ${mins}m ${secs}s`;
      }
    }

    // ============================
    // SCENE TRANSITIONS
    // ============================
    function showScene(sceneId) {
      document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
      
      setTimeout(() => {
        document.getElementById(sceneId).classList.add('active');
        currentScene = sceneId;

        if (sceneId === 'scene-question') {
          animateQuestionScene();
        } else if (sceneId === 'scene-celebrate') {
          animateCelebrateScene();
        }
      }, 400);
    }

    // ============================
    // ENVELOPE OPEN
    // ============================
    function openEnvelope() {
      const envelope = document.getElementById('envelope');

      gsap.to(envelope, {
        scale: 1.2,
        duration: 0.3,
        ease: "back.out(1.7)",
        onComplete: () => {
          gsap.to(envelope, {
            scale: 0,
            opacity: 0,
            rotation: 15,
            duration: 0.5,
            delay: 0.3,
            ease: "back.in(2)"
          });

          gsap.to('#scene-intro .intro-text, #scene-intro .intro-subtext, #scene-intro .ribbon', {
            opacity: 0,
            y: -30,
            duration: 0.4,
            delay: 0.5,
            stagger: 0.1,
            onComplete: () => {
              showScene('scene-question');
            }
          });

          // Mini confetti burst
          confetti({
            particleCount: 50,
            spread: 70,
            origin: { y: 0.5 },
            colors: ['#ff6b8a', '#ffb3c6', '#ffd700', '#ff8fab']
          });
        }
      });
    }

    // ============================
    // QUESTION SCENE ANIMATION
    // ============================
    function animateQuestionScene() {
      const tl = gsap.timeline();

      tl.from('.bear-emoji', {
        scale: 0,
        rotation: -180,
        duration: 0.8,
        ease: "back.out(1.7)"
      })
      .from('.question-title', {
        y: 50,
        opacity: 0,
        duration: 0.6,
        ease: "power3.out"
      }, "-=0.3")
      .from('.question-subtitle', {
        y: 30,
        opacity: 0,
        duration: 0.5,
        ease: "power3.out"
      }, "-=0.2")
      .from('.btn-yes', {
        scale: 0,
        duration: 0.5,
        ease: "back.out(2)"
      }, "-=0.1")
      .from('.btn-no', {
        scale: 0,
        duration: 0.4,
        ease: "back.out(2)"
      }, "-=0.2");

      // Setup the NO button shenanigans
      setupNoButton();

      // Show poem after a delay
      setTimeout(showPoem, 5000);
    }

    // ============================
    // NO BUTTON CHAOS
    // ============================
    function setupNoButton() {
      const btnNo = document.getElementById('btnNo');
      const btnYes = document.getElementById('btnYes');

      // On desktop: button runs away
      btnNo.addEventListener('mouseenter', function(e) {
        moveNoButton();
      });

      // On mobile: if they manage to tap it
      btnNo.addEventListener('click', function(e) {
        e.preventDefault();
        handleNoClick();
      });

      // Also handle touch
      btnNo.addEventListener('touchstart', function(e) {
        e.preventDefault();
        handleNoClick();
      });
    }

    function moveNoButton() {
      const btnNo = document.getElementById('btnNo');
      const btnYes = document.getElementById('btnYes');
      const container = document.getElementById('buttonsContainer');

      noAttempts++;

      // Make the Yes button grow!
      yesSize = Math.min(1 + noAttempts * 0.12, 2.2);
      gsap.to(btnYes, {
        scale: yesSize,
        duration: 0.4,
        ease: "back.out(1.7)"
      });

      // Update subtitle with funny messages
      const subtitle = document.getElementById('subtitle');
      const msgIndex = Math.min(noAttempts - 1, subtitleMessages.length - 1);
      subtitle.textContent = subtitleMessages[msgIndex];
      gsap.from(subtitle, { y: 10, opacity: 0, duration: 0.3 });

      // Move the No button to a random position
      const viewW = window.innerWidth;
      const viewH = window.innerHeight;
      const btnW = btnNo.offsetWidth;
      const btnH = btnNo.offsetHeight;

      // Keep within viewport
      const maxX = viewW - btnW - 40;
      const maxY = viewH - btnH - 40;
      const newX = Math.random() * maxX + 20;
      const newY = Math.random() * maxY + 20;

      // Use fixed position to escape the container
      btnNo.style.position = 'fixed';
      btnNo.style.zIndex = '50';

      gsap.to(btnNo, {
        left: newX + 'px',
        top: newY + 'px',
        rotation: (Math.random() - 0.5) * 40,
        duration: 0.3,
        ease: "power3.out"
      });

      // Make the No button smaller over time
      const noScale = Math.max(1 - noAttempts * 0.06, 0.4);
      gsap.to(btnNo, {
        scale: noScale,
        duration: 0.3
      });

      // Change No button text
      const noTexts = [
        "No ğŸ˜¢", "Hmm.. No? ğŸ¤”", "Still no? ğŸ˜…", 
        "Try again! ğŸ˜œ", "Nope! ğŸƒ", "Can't catch me! ğŸ’¨",
        "Almost! ğŸ™ˆ", "Too slow! ğŸ˜‚", "Give up? ğŸ˜", "Just say YES! ğŸ’–"
      ];
      btnNo.textContent = noTexts[Math.min(noAttempts - 1, noTexts.length - 1)];

      // After many attempts, make it really hard
      if (noAttempts >= 7) {
        btnNo.style.opacity = Math.max(1 - (noAttempts - 7) * 0.15, 0.2);
      }

      // After 10 attempts, add a fun message
      if (noAttempts === 10) {
        btnNo.textContent = "Fine! YES! ğŸ’–";
        btnNo.onclick = () => sayYes();
      }

      // Confetti every 3 attempts
      if (noAttempts % 3 === 0) {
        confetti({
          particleCount: 20,
          spread: 40,
          origin: { x: newX / viewW, y: newY / viewH },
          colors: ['#ff6b8a', '#ffb3c6']
        });
      }
    }

    function handleNoClick() {
      noAttempts++;

      if (noAttempts >= 10) {
        sayYes();
        return;
      }

      const msgIndex = Math.min(noAttempts - 1, noMessages.length - 1);
      const msg = noMessages[msgIndex];

      document.getElementById('noExcuseEmoji').textContent = msg.emoji;
      document.getElementById('noExcuseText').textContent = msg.text;
      document.getElementById('noExcuse').classList.add('active');

      // Shake animation
      gsap.from('#noExcuse .no-excuse-content', {
        scale: 0.5,
        opacity: 0,
        duration: 0.4,
        ease: "back.out(2)"
      });

      // Grow the Yes button
      yesSize = Math.min(1 + noAttempts * 0.12, 2.2);
      const btnYes = document.getElementById('btnYes');
      gsap.to(btnYes, {
        scale: yesSize,
        duration: 0.4,
        ease: "back.out(1.7)"
      });

      // Shrink No button
      const btnNo = document.getElementById('btnNo');
      const noScale = Math.max(1 - noAttempts * 0.08, 0.3);
      gsap.to(btnNo, { scale: noScale, duration: 0.3 });
    }

    function closeNoExcuse() {
      document.getElementById('noExcuse').classList.remove('active');
      moveNoButton();
    }

    // ============================
    // SHOW POEM
    // ============================
    function showPoem() {
      if (poemShown || currentScene !== 'scene-question') return;
      poemShown = true;

      const lines = ['poem1', 'poem2', 'poem3', 'poem4'];
      lines.forEach((id, i) => {
        gsap.to(`#${id}`, {
          opacity: 1,
          y: 0,
          duration: 0.6,
          delay: i * 0.8,
          ease: "power3.out"
        });
      });
    }

    // ============================
    // SAY YES! CELEBRATION!
    // ============================
    function sayYes() {
      const btnYes = document.getElementById('btnYes');

      // Pulse the button
      gsap.to(btnYes, {
        scale: 1.5,
        duration: 0.3,
        ease: "back.out(2)",
        onComplete: () => {
          // BIG CONFETTI EXPLOSION!
          fireConfetti();
          
          // Transition to celebration
          setTimeout(() => {
            showScene('scene-celebrate');
            // Remove the stray No button
            const btnNo = document.getElementById('btnNo');
            btnNo.style.display = 'none';
          }, 800);
        }
      });
    }

    function fireConfetti() {
      // Big burst
      const duration = 4000;
      const end = Date.now() + duration;

      const frame = () => {
        confetti({
          particleCount: 5,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
          colors: ['#ff6b8a', '#ffb3c6', '#ffd700', '#ff8fab', '#e63946']
        });
        confetti({
          particleCount: 5,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
          colors: ['#ff6b8a', '#ffb3c6', '#ffd700', '#ff8fab', '#e63946']
        });

        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      };

      // Center burst
      confetti({
        particleCount: 150,
        spread: 100,
        origin: { y: 0.5 },
        colors: ['#ff6b8a', '#ffb3c6', '#ffd700', '#ff8fab', '#e63946', '#ffffff']
      });

      frame();

      // Heart rain!
      startHeartRain();
    }

    // ============================
    // CELEBRATE SCENE ANIMATION
    // ============================
    function animateCelebrateScene() {
      const tl = gsap.timeline();

      tl.from('.celebrate-emoji', {
        scale: 0,
        rotation: -360,
        duration: 0.8,
        ease: "back.out(2)"
      })
      .from('.celebrate-title', {
        y: 60,
        opacity: 0,
        duration: 0.7,
        ease: "power3.out"
      }, "-=0.3")
      .from('.photo-frame', {
        scale: 0,
        rotation: 180,
        duration: 0.8,
        ease: "back.out(1.7)"
      }, "-=0.3")
      .from('.celebrate-message', {
        y: 40,
        opacity: 0,
        duration: 0.6,
        ease: "power3.out"
      }, "-=0.3")
      .from('.celebrate-hearts span', {
        scale: 0,
        duration: 0.4,
        stagger: 0.1,
        ease: "back.out(2)"
      }, "-=0.2")
      .from('.celebrate-content .letter-close', {
        y: 20,
        opacity: 0,
        duration: 0.4,
        ease: "power3.out"
      }, "-=0.1");

      // Periodic confetti
      setInterval(() => {
        if (currentScene === 'scene-celebrate') {
          confetti({
            particleCount: 15,
            spread: 60,
            origin: { x: Math.random(), y: Math.random() * 0.5 },
            colors: ['#ff6b8a', '#ffb3c6', '#ffd700']
          });
        }
      }, 3000);
    }

    // ============================
    // HEART RAIN
    // ============================
    function startHeartRain() {
      const container = document.getElementById('heartRain');
      const hearts = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'â¤ï¸', 'ğŸ’˜', 'ğŸ©·', 'ğŸ’'];

      for (let i = 0; i < 60; i++) {
        setTimeout(() => {
          const heart = document.createElement('div');
          heart.className = 'rain-heart';
          heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
          heart.style.left = Math.random() * 100 + '%';
          heart.style.fontSize = (Math.random() * 1.5 + 1) + 'rem';
          heart.style.animationDuration = (Math.random() * 2 + 2) + 's';
          container.appendChild(heart);

          // Remove after animation
          setTimeout(() => heart.remove(), 4000);
        }, i * 100);
      }
    }

    // ============================
    // LOVE LETTER
    // ============================
    function showLoveLetter() {
      document.getElementById('loveLetter').classList.add('active');

      gsap.from('.letter-card', {
        scale: 0.5,
        opacity: 0,
        rotation: -5,
        duration: 0.6,
        ease: "back.out(1.7)"
      });

      confetti({
        particleCount: 50,
        spread: 70,
        origin: { y: 0.5 },
        colors: ['#ff6b8a', '#ffd700']
      });
    }

    function closeLoveLetter() {
      gsap.to('.letter-card', {
        scale: 0.8,
        opacity: 0,
        duration: 0.3,
        ease: "power3.in",
        onComplete: () => {
          document.getElementById('loveLetter').classList.remove('active');
          gsap.set('.letter-card', { clearProps: 'all' });
        }
      });
    }

    // ============================
    // MOUSE TRAIL HEARTS
    // ============================
    document.addEventListener('mousemove', (e) => {
      if (Math.random() > 0.92) {
        createTrailHeart(e.clientX, e.clientY);
      }
    });

    function createTrailHeart(x, y) {
      const heart = document.createElement('div');
      heart.style.cssText = `
        position: fixed;
        left: ${x}px;
        top: ${y}px;
        font-size: ${Math.random() * 0.8 + 0.6}rem;
        pointer-events: none;
        z-index: 99;
        user-select: none;
      `;
      heart.textContent = ['ğŸ’–', 'ğŸ’•', 'âœ¨', 'ğŸ’—'][Math.floor(Math.random() * 4)];
      document.body.appendChild(heart);

      gsap.to(heart, {
        y: -60,
        x: (Math.random() - 0.5) * 40,
        opacity: 0,
        scale: 0,
        duration: 1,
        ease: "power2.out",
        onComplete: () => heart.remove()
      });
    }

    // ============================
    // KEYBOARD EASTER EGG
    // ============================
    let konamiCode = [];
    const secretCode = ['y', 'e', 's'];

    document.addEventListener('keydown', (e) => {
      konamiCode.push(e.key.toLowerCase());
      konamiCode = konamiCode.slice(-3);

      if (konamiCode.join('') === secretCode.join('') && currentScene === 'scene-question') {
        sayYes();
      }
    });

    // ============================
    // PREVENT RIGHT CLICK (playful)
    // ============================
    document.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      confetti({
        particleCount: 20,
        spread: 40,
        origin: { x: e.clientX / window.innerWidth, y: e.clientY / window.innerHeight },
        colors: ['#ff6b8a', '#ffd700']
      });
    });
  </script>
</body>
</html>
